<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>SFacts - Enhanced Analytic Hierarchy Process (AHP) Tool</title>
    <meta name="description" content="Advanced AHP tool with sensitivity analysis, form validation, and enhanced features for decision making">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/chartist.min.css">
    <link rel="stylesheet" href="css/styles.css">
    
    <script>
        var global = window;
        // Remove query params to prevent interference with auto-save/auto-load feature
        if (window.location.search) {
            window.location = window.location.pathname;
        }
    </script>
    
    <!-- Core AHP System -->
    <script defer src="js/index.js"></script>
    
    <!-- Enhanced SFacts System (ES6 Modules) -->
    <script type="module">
        import('./js/modules/main.js').then(() => {
            console.log('ðŸš€ SFacts Enhanced 2.0 loaded successfully');
        }).catch(error => {
            console.warn('Enhanced modules not available:', error);
        });
    </script>
    
    <!-- Original System (for compatibility) -->
    <script defer src="js/rolledup.js"></script>
    
    <!-- Enhanced Integration Layer -->
    <script defer src="js/enhanced-integration.js"></script>
    
    <style>
        /* Enhanced System Styles */
        .enhanced-features {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            display: inline-block;
            margin-left: 10px;
            vertical-align: middle;
        }
        
        .system-status {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        
        .system-status.active {
            color: #28a745;
        }
        
        .system-status.loading {
            color: #ffc107;
        }
        
        .system-status.error {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <div class="header-container">
        <header class="wrapper">
            <h1>
                SFacts - Analytic Hierarchy Process (AHP) Tool
                <span class="enhanced-features">Enhanced v2.0</span>
            </h1>
            <div class="system-status" id="system-status">
                Loading enhanced features...
            </div>
        </header>
    </div>

    <div class="main wrapper">
        <aside>
            <h3>About AHP</h3>
            <p>The Analytic Hierarchy Process (AHP) is a structured technique for organizing and analyzing complex decisions.</p>
            <p><a href="https://en.wikipedia.org/wiki/Analytic_hierarchy_process" target="_blank">Learn more on Wikipedia</a></p>
            
            <h3>Data Management</h3>
            <p>
                <button id="datamgmt_reset">Reset</button>
                <button id="datamgmt_export">Export</button>
                <button id="datamgmt_import">Import</button>
            </p>
            <textarea id="datamgmt" placeholder="Data import/export area..."></textarea>
            
            <!-- Enhanced Control Panel will be inserted here by enhanced-integration.js -->
        </aside>

        <form id="ahpdata" name="ahpdata">
            <!-- Goal Section -->
            <section>
                <h1>Decision Goal</h1>
                <textarea id="goal" placeholder="Describe your decision goal..."></textarea>
            </section>

            <!-- Criteria Section -->
            <section id="criteria_inputs">
                <h1>Evaluation Criteria</h1>
                <p>Enter your criteria below (up to 8):</p>
                <div class="input-grid">
                    <input type="text" id="criteria0" name="criteria0" placeholder="Criterion 1" />
                    <input type="text" id="criteria1" name="criteria1" placeholder="Criterion 2" />
                    <input type="text" id="criteria2" name="criteria2" placeholder="Criterion 3" />
                    <input type="text" id="criteria3" name="criteria3" placeholder="Criterion 4" />
                    <input type="text" id="criteria4" name="criteria4" placeholder="Criterion 5" />
                    <input type="text" id="criteria5" name="criteria5" placeholder="Criterion 6" />
                    <input type="text" id="criteria6" name="criteria6" placeholder="Criterion 7" />
                    <input type="text" id="criteria7" name="criteria7" placeholder="Criterion 8" />
                </div>
            </section>

            <!-- Alternatives Section -->
            <section id="items_inputs">
                <h1>Decision Alternatives</h1>
                <p>Enter your alternatives below (up to 8):</p>
                <div class="input-grid">
                    <input type="text" id="item0" name="item0" placeholder="Alternative 1" />
                    <input type="text" id="item1" name="item1" placeholder="Alternative 2" />
                    <input type="text" id="item2" name="item2" placeholder="Alternative 3" />
                    <input type="text" id="item3" name="item3" placeholder="Alternative 4" />
                    <input type="text" id="item4" name="item4" placeholder="Alternative 5" />
                    <input type="text" id="item5" name="item5" placeholder="Alternative 6" />
                    <input type="text" id="item6" name="item6" placeholder="Alternative 7" />
                    <input type="text" id="item7" name="item7" placeholder="Alternative 8" />
                </div>
            </section>

            <!-- Criteria Pairwise Comparisons -->
            <section id="pairwise_criteria" class="pairwise_criteria pairwisetable">
                <h1>Criteria Pairwise Comparisons</h1>
                <p>Compare each criterion against others with respect to your goal.</p>
                <aside id="pairwise_criteria_sentence"></aside>
                <table>
                    <thead>
                        <tr>
                            <th></th>
                            <th class="crit0 criteria0" scope="col"></th>
                            <th class="crit1 criteria1" scope="col"></th>
                            <th class="crit2 criteria2" scope="col"></th>
                            <th class="crit3 criteria3" scope="col"></th>
                            <th class="crit4 criteria4" scope="col"></th>
                            <th class="crit5 criteria5" scope="col"></th>
                            <th class="crit6 criteria6" scope="col"></th>
                            <th class="crit7 criteria7" scope="col"></th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Row for Criterion 0 -->
                        <tr class="crit0">
                            <th class="criteria0" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria0v0" name="criteria0v0" value="1" readonly /></td>
                            <td class="crit1"><input type="text" id="criteria0v1" name="criteria0v1" /></td>
                            <td class="crit2"><input type="text" id="criteria0v2" name="criteria0v2" /></td>
                            <td class="crit3"><input type="text" id="criteria0v3" name="criteria0v3" /></td>
                            <td class="crit4"><input type="text" id="criteria0v4" name="criteria0v4" /></td>
                            <td class="crit5"><input type="text" id="criteria0v5" name="criteria0v5" /></td>
                            <td class="crit6"><input type="text" id="criteria0v6" name="criteria0v6" /></td>
                            <td class="crit7"><input type="text" id="criteria0v7" name="criteria0v7" /></td>
                        </tr>
                        <!-- Row for Criterion 1 -->
                        <tr class="crit1">
                            <th class="criteria1" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria1v0" name="criteria1v0" /></td>
                            <td class="crit1"><input type="text" id="criteria1v1" name="criteria1v1" value="1" readonly /></td>
                            <td class="crit2"><input type="text" id="criteria1v2" name="criteria1v2" /></td>
                            <td class="crit3"><input type="text" id="criteria1v3" name="criteria1v3" /></td>
                            <td class="crit4"><input type="text" id="criteria1v4" name="criteria1v4" /></td>
                            <td class="crit5"><input type="text" id="criteria1v5" name="criteria1v5" /></td>
                            <td class="crit6"><input type="text" id="criteria1v6" name="criteria1v6" /></td>
                            <td class="crit7"><input type="text" id="criteria1v7" name="criteria1v7" /></td>
                        </tr>
                        <!-- Row for Criterion 2 -->
                        <tr class="crit2">
                            <th class="criteria2" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria2v0" name="criteria2v0" /></td>
                            <td class="crit1"><input type="text" id="criteria2v1" name="criteria2v1" /></td>
                            <td class="crit2"><input type="text" id="criteria2v2" name="criteria2v2" value="1" readonly /></td>
                            <td class="crit3"><input type="text" id="criteria2v3" name="criteria2v3" /></td>
                            <td class="crit4"><input type="text" id="criteria2v4" name="criteria2v4" /></td>
                            <td class="crit5"><input type="text" id="criteria2v5" name="criteria2v5" /></td>
                            <td class="crit6"><input type="text" id="criteria2v6" name="criteria2v6" /></td>
                            <td class="crit7"><input type="text" id="criteria2v7" name="criteria2v7" /></td>
                        </tr>
                        <!-- Row for Criterion 3 -->
                        <tr class="crit3">
                            <th class="criteria3" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria3v0" name="criteria3v0" /></td>
                            <td class="crit1"><input type="text" id="criteria3v1" name="criteria3v1" /></td>
                            <td class="crit2"><input type="text" id="criteria3v2" name="criteria3v2" /></td>
                            <td class="crit3"><input type="text" id="criteria3v3" name="criteria3v3" value="1" readonly /></td>
                            <td class="crit4"><input type="text" id="criteria3v4" name="criteria3v4" /></td>
                            <td class="crit5"><input type="text" id="criteria3v5" name="criteria3v5" /></td>
                            <td class="crit6"><input type="text" id="criteria3v6" name="criteria3v6" /></td>
                            <td class="crit7"><input type="text" id="criteria3v7" name="criteria3v7" /></td>
                        </tr>
                        <!-- Row for Criterion 4 -->
                        <tr class="crit4">
                            <th class="criteria4" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria4v0" name="criteria4v0" /></td>
                            <td class="crit1"><input type="text" id="criteria4v1" name="criteria4v1" /></td>
                            <td class="crit2"><input type="text" id="criteria4v2" name="criteria4v2" /></td>
                            <td class="crit3"><input type="text" id="criteria4v3" name="criteria4v3" /></td>
                            <td class="crit4"><input type="text" id="criteria4v4" name="criteria4v4" value="1" readonly /></td>
                            <td class="crit5"><input type="text" id="criteria4v5" name="criteria4v5" /></td>
                            <td class="crit6"><input type="text" id="criteria4v6" name="criteria4v6" /></td>
                            <td class="crit7"><input type="text" id="criteria4v7" name="criteria4v7" /></td>
                        </tr>
                        <!-- Row for Criterion 5 -->
                        <tr class="crit5">
                            <th class="criteria5" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria5v0" name="criteria5v0" /></td>
                            <td class="crit1"><input type="text" id="criteria5v1" name="criteria5v1" /></td>
                            <td class="crit2"><input type="text" id="criteria5v2" name="criteria5v2" /></td>
                            <td class="crit3"><input type="text" id="criteria5v3" name="criteria5v3" /></td>
                            <td class="crit4"><input type="text" id="criteria5v4" name="criteria5v4" /></td>
                            <td class="crit5"><input type="text" id="criteria5v5" name="criteria5v5" value="1" readonly /></td>
                            <td class="crit6"><input type="text" id="criteria5v6" name="criteria5v6" /></td>
                            <td class="crit7"><input type="text" id="criteria5v7" name="criteria5v7" /></td>
                        </tr>
                        <!-- Row for Criterion 6 -->
                        <tr class="crit6">
                            <th class="criteria6" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria6v0" name="criteria6v0" /></td>
                            <td class="crit1"><input type="text" id="criteria6v1" name="criteria6v1" /></td>
                            <td class="crit2"><input type="text" id="criteria6v2" name="criteria6v2" /></td>
                            <td class="crit3"><input type="text" id="criteria6v3" name="criteria6v3" /></td>
                            <td class="crit4"><input type="text" id="criteria6v4" name="criteria6v4" /></td>
                            <td class="crit5"><input type="text" id="criteria6v5" name="criteria6v5" /></td>
                            <td class="crit6"><input type="text" id="criteria6v6" name="criteria6v6" value="1" readonly /></td>
                            <td class="crit7"><input type="text" id="criteria6v7" name="criteria6v7" /></td>
                        </tr>
                        <!-- Row for Criterion 7 -->
                        <tr class="crit7">
                            <th class="criteria7" scope="row"></th>
                            <td class="crit0"><input type="text" id="criteria7v0" name="criteria7v0" /></td>
                            <td class="crit1"><input type="text" id="criteria7v1" name="criteria7v1" /></td>
                            <td class="crit2"><input type="text" id="criteria7v2" name="criteria7v2" /></td>
                            <td class="crit3"><input type="text" id="criteria7v3" name="criteria7v3" /></td>
                            <td class="crit4"><input type="text" id="criteria7v4" name="criteria7v4" /></td>
                            <td class="crit5"><input type="text" id="criteria7v5" name="criteria7v5" /></td>
                            <td class="crit6"><input type="text" id="criteria7v6" name="criteria7v6" /></td>
                            <td class="crit7"><input type="text" id="criteria7v7" name="criteria7v7" value="1" readonly /></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- Alternatives Pairwise Comparisons -->
            <section id="pairwise_items" class="pairwise_items pairwisetable">
                <h1>Alternatives Pairwise Comparisons</h1>
                <p>Compare each alternative against others with respect to each criterion.</p>
                
                <!-- Criterion 0 Comparisons -->
                <section id="c0_items" class="c0_items">
                    <h2 class="criteria0"></h2>
                    <aside id="criteria0_sentence"></aside>
                    <table>
                        <thead>
                            <tr>
                                <th></th>
                                <th class="item0" scope="col"></th>
                                <th class="item1" scope="col"></th>
                                <th class="item2" scope="col"></th>
                                <th class="item3" scope="col"></th>
                                <th class="item4" scope="col"></th>
                                <th class="item5" scope="col"></th>
                                <th class="item6" scope="col"></th>
                                <th class="item7" scope="col"></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="item0">
                                <th class="item0" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item0v0" name="c0_item0v0" value="1" readonly /></td>
                                <td class="item1"><input type="text" id="c0_item0v1" name="c0_item0v1" /></td>
                                <td class="item2"><input type="text" id="c0_item0v2" name="c0_item0v2" /></td>
                                <td class="item3"><input type="text" id="c0_item0v3" name="c0_item0v3" /></td>
                                <td class="item4"><input type="text" id="c0_item0v4" name="c0_item0v4" /></td>
                                <td class="item5"><input type="text" id="c0_item0v5" name="c0_item0v5" /></td>
                                <td class="item6"><input type="text" id="c0_item0v6" name="c0_item0v6" /></td>
                                <td class="item7"><input type="text" id="c0_item0v7" name="c0_item0v7" /></td>
                            </tr>
                            <tr class="item1">
                                <th class="item1" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item1v0" name="c0_item1v0" /></td>
                                <td class="item1"><input type="text" id="c0_item1v1" name="c0_item1v1" value="1" readonly /></td>
                                <td class="item2"><input type="text" id="c0_item1v2" name="c0_item1v2" /></td>
                                <td class="item3"><input type="text" id="c0_item1v3" name="c0_item1v3" /></td>
                                <td class="item4"><input type="text" id="c0_item1v4" name="c0_item1v4" /></td>
                                <td class="item5"><input type="text" id="c0_item1v5" name="c0_item1v5" /></td>
                                <td class="item6"><input type="text" id="c0_item1v6" name="c0_item1v6" /></td>
                                <td class="item7"><input type="text" id="c0_item1v7" name="c0_item1v7" /></td>
                            </tr>
                            <tr class="item2">
                                <th class="item2" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item2v0" name="c0_item2v0" /></td>
                                <td class="item1"><input type="text" id="c0_item2v1" name="c0_item2v1" /></td>
                                <td class="item2"><input type="text" id="c0_item2v2" name="c0_item2v2" value="1" readonly /></td>
                                <td class="item3"><input type="text" id="c0_item2v3" name="c0_item2v3" /></td>
                                <td class="item4"><input type="text" id="c0_item2v4" name="c0_item2v4" /></td>
                                <td class="item5"><input type="text" id="c0_item2v5" name="c0_item2v5" /></td>
                                <td class="item6"><input type="text" id="c0_item2v6" name="c0_item2v6" /></td>
                                <td class="item7"><input type="text" id="c0_item2v7" name="c0_item2v7" /></td>
                            </tr>
                            <tr class="item3">
                                <th class="item3" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item3v0" name="c0_item3v0" /></td>
                                <td class="item1"><input type="text" id="c0_item3v1" name="c0_item3v1" /></td>
                                <td class="item2"><input type="text" id="c0_item3v2" name="c0_item3v2" /></td>
                                <td class="item3"><input type="text" id="c0_item3v3" name="c0_item3v3" value="1" readonly /></td>
                                <td class="item4"><input type="text" id="c0_item3v4" name="c0_item3v4" /></td>
                                <td class="item5"><input type="text" id="c0_item3v5" name="c0_item3v5" /></td>
                                <td class="item6"><input type="text" id="c0_item3v6" name="c0_item3v6" /></td>
                                <td class="item7"><input type="text" id="c0_item3v7" name="c0_item3v7" /></td>
                            </tr>
                            <tr class="item4">
                                <th class="item4" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item4v0" name="c0_item4v0" /></td>
                                <td class="item1"><input type="text" id="c0_item4v1" name="c0_item4v1" /></td>
                                <td class="item2"><input type="text" id="c0_item4v2" name="c0_item4v2" /></td>
                                <td class="item3"><input type="text" id="c0_item4v3" name="c0_item4v3" /></td>
                                <td class="item4"><input type="text" id="c0_item4v4" name="c0_item4v4" value="1" readonly /></td>
                                <td class="item5"><input type="text" id="c0_item4v5" name="c0_item4v5" /></td>
                                <td class="item6"><input type="text" id="c0_item4v6" name="c0_item4v6" /></td>
                                <td class="item7"><input type="text" id="c0_item4v7" name="c0_item4v7" /></td>
                            </tr>
                            <tr class="item5">
                                <th class="item5" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item5v0" name="c0_item5v0" /></td>
                                <td class="item1"><input type="text" id="c0_item5v1" name="c0_item5v1" /></td>
                                <td class="item2"><input type="text" id="c0_item5v2" name="c0_item5v2" /></td>
                                <td class="item3"><input type="text" id="c0_item5v3" name="c0_item5v3" /></td>
                                <td class="item4"><input type="text" id="c0_item5v4" name="c0_item5v4" /></td>
                                <td class="item5"><input type="text" id="c0_item5v5" name="c0_item5v5" value="1" readonly /></td>
                                <td class="item6"><input type="text" id="c0_item5v6" name="c0_item5v6" /></td>
                                <td class="item7"><input type="text" id="c0_item5v7" name="c0_item5v7" /></td>
                            </tr>
                            <tr class="item6">
                                <th class="item6" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item6v0" name="c0_item6v0" /></td>
                                <td class="item1"><input type="text" id="c0_item6v1" name="c0_item6v1" /></td>
                                <td class="item2"><input type="text" id="c0_item6v2" name="c0_item6v2" /></td>
                                <td class="item3"><input type="text" id="c0_item6v3" name="c0_item6v3" /></td>
                                <td class="item4"><input type="text" id="c0_item6v4" name="c0_item6v4" /></td>
                                <td class="item5"><input type="text" id="c0_item6v5" name="c0_item6v5" /></td>
                                <td class="item6"><input type="text" id="c0_item6v6" name="c0_item6v6" value="1" readonly /></td>
                                <td class="item7"><input type="text" id="c0_item6v7" name="c0_item6v7" /></td>
                            </tr>
                            <tr class="item7">
                                <th class="item7" scope="row"></th>
                                <td class="item0"><input type="text" id="c0_item7v0" name="c0_item7v0" /></td>
                                <td class="item1"><input type="text" id="c0_item7v1" name="c0_item7v1" /></td>
                                <td class="item2"><input type="text" id="c0_item7v2" name="c0_item7v2" /></td>
                                <td class="item3"><input type="text" id="c0_item7v3" name="c0_item7v3" /></td>
                                <td class="item4"><input type="text" id="c0_item7v4" name="c0_item7v4" /></td>
                                <td class="item5"><input type="text" id="c0_item7v5" name="c0_item7v5" /></td>
                                <td class="item6"><input type="text" id="c0_item7v6" name="c0_item7v6" /></td>
                                <td class="item7"><input type="text" id="c0_item7v7" name="c0_item7v7" value="1" readonly /></td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Additional criteria sections (c1_items to c7_items) remain the same structure -->
                <!-- They will be populated dynamically by the original system -->
                
            </section>

            <!-- Calculation Buttons -->
            <section class="calculation-buttons">
                <button id="calcbtn" class="btn-primary">Calculate Results</button>
                <!-- Enhanced Calculate button will be added here automatically -->
            </section>
        </form>

        <!-- Results Section -->
        <section id="results" class="results">
            <h1>Analysis Results</h1>
            
            <!-- Basic Results -->
            <div class="basic-results">
                <h2>Criteria Weights</h2>
                <div class="ct-chart ct-octave" id="criteria"></div>
                
                <h2>Alternative Scores</h2>
                <div class="ct-chart ct-double-octave" id="rankings"></div>
            </div>
            
            <!-- Enhanced Results Section will be inserted here by enhanced-integration.js -->
        </section>
    </div>

    <div class="footer-container">
        <footer class="wrapper">
            <h3>Open Source Project</h3>
            <p>
                This tool is based on the original <a href="https://github.com/ComcastSamples/ahp-tool">AHP Tool by Comcast</a>.
                Enhanced with SFacts 2.0 featuring sensitivity analysis, form validation, and advanced export options.
            </p>
            <p style="font-size: 12px; color: #666; margin-top: 10px;">
                SFacts Enhanced v2.0 | Built with modern JavaScript (ES6 Modules)
            </p>
        </footer>
    </div>

    <script>
        // Update system status when enhanced features load
        document.addEventListener('DOMContentLoaded', function() {
            const statusElement = document.getElementById('system-status');
            
            // Check for enhanced system periodically
            const checkEnhancedSystem = setInterval(() => {
                if (window.SFactsApp) {
                    statusElement.textContent = 'Enhanced features: Ready âœ“';
                    statusElement.className = 'system-status active';
                    clearInterval(checkEnhancedSystem);
                }
            }, 1000);
            
            // Fallback if enhanced system doesn't load
            setTimeout(() => {
                if (!window.SFactsApp) {
                    statusElement.textContent = 'Enhanced features: Not available (using basic mode)';
                    statusElement.className = 'system-status';
                }
            }, 5000);
            
            // Add CSS for input grid
            const style = document.createElement('style');
            style.textContent = `
                .input-grid {
                    display: grid;
                    grid-template-columns: repeat(2, 1fr);
                    gap: 10px;
                    margin-bottom: 15px;
                }
                
                .input-grid input {
                    width: 100%;
                    padding: 8px;
                    border: 1px solid #ddd;
                    border-radius: 4px;
                }
                
                .calculation-buttons {
                    margin: 20px 0;
                    padding: 20px 0;
                    border-top: 1px solid #eee;
                }
                
                .btn-primary {
                    background: #007cba;
                    color: white;
                    border: none;
                    padding: 12px 24px;
                    border-radius: 4px;
                    font-size: 16px;
                    cursor: pointer;
                    transition: background 0.3s ease;
                }
                
                .btn-primary:hover {
                    background: #005a87;
                }
                
                @media (max-width: 768px) {
                    .input-grid {
                        grid-template-columns: 1fr;
                    }
                }
            `;
            document.head.appendChild(style);
        });
    </script>
</body>
</html>
